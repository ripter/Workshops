pico-8 cartridge // http://www.pico-8.com
version 27
__lua__
-- fate dice roller
-- by ripter001

local result = {}
local is_rolling = false
local frame = 0

-- rolls 4 FATE dice
function roll()
  result = {}
  for i=1,4 do
   add(result, flr(rnd(3))-1)
  end
end


function _init()
  roll()
end

-- press any key to re-roll the dice
function _update()
  if btnp() > 0 then
  	roll()
  	is_rolling = true
  end
  
  if is_rolling then
    if frame == 30 then
      is_rolling = false
      frame = 0
    else
      frame = frame + 1
    end
  end
end


function _draw()
	cls(2)

	-- draw the 4 dice
	draw_dice(0, 16)

	-- display adjective
	draw_adjective(43, 40)
end

-->8
-- draw a dice with value
function draw_dice(x, y)
	for idx,v in pairs(result) do
	 local s = get_sprite(v)
	 if is_rolling then
	  s = spinning_sprite()
	 else
	 	s = get_sprite(v)
		end
		
		spr_2x2(s, x + (idx * 22), y)
	end
end


-- converts dice value into sprite
function get_sprite(value)	
	-- sprite for dice value
 if value == 1 then
 	return 2
 elseif value == -1 then
 	return 4
 else
  return 0
 end
end

function spinning_sprite()
 local frames = {
  6, 8, 10, 6, 8, 10, 6, 8,
 }
 
 -- frame is a global between 0-30
 local alpha = flr(frame * (#frames / 30))
 
 return frames[alpha+1]
 --return 6
--[[
 if alpha == 0 then
  return 6
 elseif alpha == 1 then
  return 8
 elseif alpha == 2 then
  return 6
  --return 10 
   --return get_sprite(flr(rnd(3))-1)
 elseif alpha == 3 then
  return 8
 end
 
 return 6
 --return flr(rnd(3))-1
]]--
--[[ 
 if frame % 10 == 0 then
  return flr(rnd(3))-1
	elseif frame % 2 == 0 then
  return 6
 end
 return 8
]]--
--[[
		if frame % 7 == 0 then
		 value = flr(rnd(3))-1
		elseif frame % 2 == 0 then
		 value = 0
		else
	  value = 6
	 end
]]--
end
-->8
-- the adjective ladder
function draw_adjective(x, y)
 if is_rolling then 
 	return 
 end
	local total = 0
	for k,v in pairs(result) do
		total = total + v
	end

	local adjs = {
		"horrifying",
		"catastrophic",
		"terrible",
		"poor",
		"mediocre",
		"average",
		"fair",
		"good",
		"great",
		"superb",
		"fantastic",
		"epic",
		"legendary",
	}

	local adj = adjs[total+5]
	local label = total.." "..adj
	print(label, x, y)
end
-->8
-- coroutine to play animated sprites.
function co_animate(frames, x, y)
	for i,frame in pairs(frames) do
		spr_2x2(frame, x, y)
		yield()
	end
end

-- draws a sprite sized 2x2
function spr_2x2(sprite, x, y)
 spr(sprite,    x,   y)
	spr(sprite+1,  x+8, y)
	spr(sprite+16, x,   y+8)
	spr(sprite+17, x+8, y+8)
end
__gfx__
26666666666666622666666666666662266666666666666226666666666666622666666666666662266666666666666255555555555555555555555555555555
66222222222222666622222222222266662222222222226666222222222222666622222222222266662222222222226657777777777777777777777777777775
62222222222222266222222222222226622222222222222662222222222222266222222222222226622222222222222657666666666666666666666666666675
62222222222222266222222662222226622222222222222662222222222222266222222222222226622222222222222657600000000000000000000000000675
62222222222222266222222662222226622222222222222662222222222222266622222222222266622222222222222657600000000000000000000000000675
62222222222222266222222662222226622222222222222662222222222222262666666666666662622222666622222657600000000000000000000000000675
62222222222222266222222662222226622222222222222662222222222222266622222222222266622226666662222657600000000000000000000000000675
62222222222222266226666666666226622666666666622662222222222222266222222222222226622266666666222657600000000000000000000000000675
62222222222222266226666666666226622666666666622666222222222222666222222222222226622266666666222657600000000000000000000000000675
62222222222222266222222662222226622222222222222626666666666666626222222222222226622226666662222657600000000000000000000000000675
62222222222222266222222662222226622222222222222666222222222222666222222222222226622222666622222657600000000000000000000000000675
62222222222222266222222662222226622222222222222662222222222222266222222222222226622222222222222657600000000000000000000000000675
62222222222222266222222662222226622222222222222662222222222222266222222222222226622222222222222657600000000000000000000000000675
62222222222222266222222222222226622222222222222662222222222222266222222222222226622222222222222657600000000000000000000000000675
66222222222222666622222222222266662222222222226666222222222222666622222222222266662222222222226657600000000000000000000000000675
26666666666666622666666666666662266666666666666226666666666666622666666666666662266666666666666257600000000000000000000000000675
__label__
22222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
22222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
22222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
22222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
22222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
22222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
22222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
22222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
22222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
22222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
22222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
22222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
22222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
22222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
22222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
22222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
22222222222222222226666666666666622222222226666666666666622222222226666666666666622222222226666666666666622222222222222222222222
22222222222222222266222222222222662222222266222222222222662222222266222222222222662222222266222222222222662222222222222222222222
22222222222222222262222222222222262222222262222222222222262222222262222222222222262222222262222222222222262222222222222222222222
22222222222222222262222226622222262222222262222226622222262222222262222222222222262222222262222222222222262222222222222222222222
22222222222222222262222226622222262222222262222226622222262222222262222222222222262222222262222222222222262222222222222222222222
22222222222222222262222226622222262222222262222226622222262222222262222222222222262222222262222222222222262222222222222222222222
22222222222222222262222226622222262222222262222226622222262222222262222222222222262222222262222222222222262222222222222222222222
22222222222222222262266666666662262222222262266666666662262222222262266666666662262222222262222222222222262222222222222222222222
22222222222222222262266666666662262222222262266666666662262222222262266666666662262222222262222222222222262222222222222222222222
22222222222222222262222226622222262222222262222226622222262222222262222222222222262222222262222222222222262222222222222222222222
22222222222222222262222226622222262222222262222226622222262222222262222222222222262222222262222222222222262222222222222222222222
22222222222222222262222226622222262222222262222226622222262222222262222222222222262222222262222222222222262222222222222222222222
22222222222222222262222226622222262222222262222226622222262222222262222222222222262222222262222222222222262222222222222222222222
22222222222222222262222222222222262222222262222222222222262222222262222222222222262222222262222222222222262222222222222222222222
22222222222222222266222222222222662222222266222222222222662222222266222222222222662222222266222222222222662222222222222222222222
22222222222222222226666666666666622222222226666666666666622222222226666666666666622222222226666666666666622222222222222222222222
22222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
22222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
22222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
22222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
22222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
22222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
22222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
22222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
22222222222222222222222222222222222222222226622222266626262666266626662266266622222222222222222222222222222222222222222222222222
22222222222222222222222222222222222222222222622222262626262622262626262622262222222222222222222222222222222222222222222222222222
22222222222222222222222222222222222222222222622222266626262662266226662622266222222222222222222222222222222222222222222222222222
22222222222222222222222222222222222222222222622222262626662622262626262626262222222222222222222222222222222222222222222222222222
22222222222222222222222222222222222222222226662222262622622666262626262666266622222222222222222222222222222222222222222222222222
22222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
22222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
22222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
22222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
22222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
22222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
22222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
22222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
22222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
22222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
22222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
22222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
22222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
22222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
22222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
22222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
22222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
22222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
22222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
22222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
22222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
22222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
22222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
22222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
22222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
22222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
22222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
22222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
22222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
22222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
22222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
22222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
22222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
22222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
22222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
22222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
22222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
22222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
22222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
22222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
22222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
22222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
22222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
22222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
22222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
22222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
22222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
22222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
22222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
22222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
22222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
22222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
22222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
22222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
22222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
22222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
22222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
22222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
22222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
22222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
22222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
22222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
22222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
22222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
22222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
22222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
22222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
22222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
22222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
22222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
22222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
22222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
22222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
22222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
22222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
22222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
22222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
22222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
22222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
22222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
22222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
22222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
22222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222

